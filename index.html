<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>MountainShares - Rural Economic Development</title>
    <meta name="description" content="MountainShares - Local digital currency for rural economic development. Built on Arbitrum One.">
    
    <!-- Open Graph / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://mountainshares.com/">
    <meta property="og:title" content="MountainShares - Rural Economic Development">
    <meta property="og:description" content="Local digital currency built on Arbitrum One. Keep money in your community with MountainShares.">
    <meta property="og:image" content="https://i.imgur.com/cLHJYe3.jpg">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://mountainshares.com/">
    <meta property="twitter:title" content="MountainShares - Rural Economic Development">
    <meta property="twitter:description" content="Local digital currency built on Arbitrum One. Keep money in your community with MountainShares.">
    <meta property="twitter:image" content="https://i.imgur.com/cLHJYe3.jpg">
    
    <!-- FORCE CACHE REFRESH -->
    <meta http-equiv="Cache-Control" content="no-cache, no-store, must-revalidate">
    <meta http-equiv="Pragma" content="no-cache">
    <meta http-equiv="Expires" content="0">
    
    <link rel="icon" href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üèîÔ∏è</text></svg>">
    
    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@400;700&family=Orbitron:wght@400;700;900&display=swap" rel="stylesheet">
    
    <!-- External Stylesheet -->
    <link rel="stylesheet" href="styles.css">
    
    <!-- Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-526FNHHQ5Y"></script>
    <script>
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
        gtag('config', 'G-526FNHHQ5Y');
    </script>
    
    <!-- Ethers.js -->
    <script src="https://cdn.ethers.io/lib/ethers-5.7.2.umd.min.js"></script>
    
    <!-- Stripe.js -->
    <script src="https://js.stripe.com/v3/"></script>
</head>
<body>
    <div class="business-app">
        <header class="business-header">
            <div class="header-content">
                <div class="logo-section">
                    <div class="premium-logo">üèîÔ∏è</div>
                    <div class="brand-section">
                        <h1>MountainShares</h1>
                        <div class="business-tagline">Rural Economic Development</div>
                    </div>
                </div>
                <div class="launch-badge">Live on Arbitrum One</div>
            </div>
        </header>

        <nav class="business-nav">
            <div class="nav-container">
                <button class="nav-item active" onclick="showTab('home')">Home</button>
                <button class="nav-item" onclick="showTab('purchase')">Purchase</button>
                <button class="nav-item" onclick="showTab('about')">About</button>
                <button class="nav-item" onclick="showTab('community')">Community</button>
            </div>
        </nav>

        <main class="main-content">
            <div id="home" class="content-tab active">
                <section class="hero-section">
                    <div class="hero-content">
                        <h2>Welcome to MountainShares</h2>
                        <p>Join West Virginia's premier digital currency network. Keep money in your community with MountainShares, built on Arbitrum One for fast, secure transactions.</p>
                        <div class="button-group">
                            <a href="#purchase" class="btn-premium btn-primary">Purchase MountainShares</a>
                            <a href="#join" class="btn-premium btn-secondary">Join the Network</a>
                        </div>
                    </div>
                </section>
            </div>

            <div id="purchase" class="content-tab">
                <section class="purchase-section">
                    <h2>Purchase MountainShares</h2>
                    <div class="purchase-interface">
                        <div class="status-section">
                            <div class="status-item">
                                <span>Blockchain Status:</span>
                                <span id="blockchainStatus" class="status-checking">Checking...</span>
                            </div>
                            <div class="status-item">
                                <span>Contract Status:</span>
                                <span id="contractStatus" class="status-checking">Checking...</span>
                            </div>
                        </div>
                        <div class="purchase-form">
                            <button id="connectWallet" class="btn-premium btn-primary">Connect Wallet</button>
                            <div id="purchaseForm" style="display: none;">
                                <input type="number" id="shareAmount" placeholder="Number of shares" min="1">
                                <button id="purchaseButton" class="btn-premium btn-primary">Purchase Shares</button>
                            </div>
                        </div>
                    </div>
                </section>
            </div>

            <div id="about" class="content-tab">
                <h2>About MountainShares</h2>
                <p>Learn more about our mission to support rural economic development through local digital currency.</p>
            </div>

            <div id="community" class="content-tab">
                <h2>Community</h2>
                <p>Join our growing community of MountainShares users and supporters.</p>
            </div>
        </main>
    </div>

    <script>
        // Web3 Integration
        let provider;
        let signer;
        let contract;
        const contractAddress = '0x1234567890123456789012345678901234567890'; // Replace with actual contract address

        async function initWeb3() {
            if (typeof window.ethereum !== 'undefined') {
                try {
                    provider = new ethers.providers.Web3Provider(window.ethereum);
                    await provider.send("eth_requestAccounts", []);
                    signer = provider.getSigner();
                    
                    // Check if we're on Arbitrum One
                    const network = await provider.getNetwork();
                    if (network.chainId !== 42161) {
                        updateStatus('blockchainStatus', 'Please switch to Arbitrum One network', 'status-error');
                        return false;
                    }
                    
                    updateStatus('blockchainStatus', 'Connected to Arbitrum One', 'status-online');
                    return true;
                } catch (error) {
                    console.error('Error initializing Web3:', error);
                    updateStatus('blockchainStatus', 'Error connecting to wallet', 'status-error');
                    return false;
                }
            } else {
                updateStatus('blockchainStatus', 'MetaMask not installed', 'status-offline');
                return false;
            }
        }

        async function connectWallet() {
            const connected = await initWeb3();
            if (connected) {
                document.getElementById('connectWallet').style.display = 'none';
                document.getElementById('purchaseForm').style.display = 'block';
            }
        }

        async function purchaseShares() {
            const amount = document.getElementById('shareAmount').value;
            if (!amount || amount < 1) {
                alert('Please enter a valid number of shares');
                return;
            }

            try {
                updateStatus('contractStatus', 'Processing transaction...', 'status-checking');
                // Add your contract interaction code here
                updateStatus('contractStatus', 'Transaction successful!', 'status-online');
            } catch (error) {
                console.error('Error purchasing shares:', error);
                updateStatus('contractStatus', 'Transaction failed', 'status-error');
            }
        }

        function updateStatus(elementId, message, statusClass) {
            const element = document.getElementById(elementId);
            element.textContent = message;
            element.className = statusClass;
        }

        function showTab(tabId) {
            document.querySelectorAll('.content-tab').forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabId).classList.add('active');

            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.classList.add('active');
        }

        // Initialize on page load
        window.addEventListener('load', () => {
            initWeb3();
            document.getElementById('connectWallet').addEventListener('click', connectWallet);
            document.getElementById('purchaseButton').addEventListener('click', purchaseShares);
        });
    </script>
</body>
</html>
